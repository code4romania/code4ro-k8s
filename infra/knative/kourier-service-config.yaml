apiVersion: v1
kind: ConfigMap
metadata:
  name: config-manifest
  namespace: default
data:
  kourier-service.yaml: |
    apiVersion: v1
    kind: Service
    metadata:
      labels:
        app.kubernetes.io/component: net-kourier
        app.kubernetes.io/instance: knative
        app.kubernetes.io/name: knative-serving
        app.kubernetes.io/version: 1.8.0
        networking.knative.dev/ingress-provider: kourier
      name: kourier
      namespace: knative-serving
      annotations:
        service.beta.kubernetes.io/aws-load-balancer-type: "external"
        service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: "ip"
        service.beta.kubernetes.io/aws-load-balancer-scheme: internet-facing
    spec:
      ports:
      - name: http2
        port: 80
        protocol: TCP
        targetPort: 8080
      - name: https
        port: 443
        protocol: TCP
        targetPort: 8443
      selector:
        app: 3scale-kourier-gateway
      externalTrafficPolicy: Local
      type: LoadBalancer
